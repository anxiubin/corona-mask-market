(this["webpackJsonpcorona-mask-market"]=this["webpackJsonpcorona-mask-market"]||[]).push([[0],{32:function(e,t){},33:function(e,t){},37:function(e,t,a){e.exports=a(67)},42:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(30),o=a.n(r),i=(a(42),a(2)),l=a(10),s=a(13),m=a.n(s),u=a(31),d=a.n(u),f=a(16);d.a.config();var v=[{id:"seoul",idKR:"\uc11c\uc6b8",num:0},{id:"gyeonggi",idKR:"\uacbd\uae30",num:0},{id:"incheon",idKR:"\uc778\ucc9c",num:0},{id:"gangwon",idKR:"\uac15\uc6d0",num:0},{id:"chungnam",idKR:"\ucda9\ub0a8",num:0},{id:"chungbuk",idKR:"\ucda9\ubd81",num:0},{id:"sejong",idKR:"\uc138\uc885",num:0},{id:"daejeon",idKR:"\ub300\uc804",num:0},{id:"jeonbuk",idKR:"\uc804\ubd81",num:0},{id:"jeonnam",idKR:"\uc804\ub0a8",num:0},{id:"gwangju",idKR:"\uad11\uc8fc",num:0},{id:"gyeongbuk",idKR:"\uacbd\ubd81",num:0},{id:"gyeongnam",idKR:"\uacbd\ub0a8",num:0},{id:"daegu",idKR:"\ub300\uad6c",num:0},{id:"ulsan",idKR:"\uc6b8\uc0b0",num:0},{id:"busan",idKR:"\ubd80\uc0b0",num:0},{id:"jeju",idKR:"\uc81c\uc8fc",num:0},{id:"quarantine",idKR:"\uac80\uc5ed",num:0}],E=function(e){return m()({method:"GET",url:"https://cors-anywhere.herokuapp.com/https://api.dropper.tech/covid19/status/korea?locale=".concat(e),headers:{APIKey:"16193b8202c09e5ef5e69f867d689d8f96d27a6680db7fe8313456f761eb6026"}})},g=Object(n.createContext)(null),p=Object(n.createContext)(null);function b(e){var t=e.children,a=Object(n.useState)({certified:void 0,dead:void 0,deisolated:void 0,updateTime:void 0}),r=Object(i.a)(a,2),o=r[0],s=r[1],m=Object(n.useState)(v),u=Object(i.a)(m,2),d=u[0],b=u[1];return Object(n.useEffect)((function(){void 0===o.certified&&E("synthesize").then((function(e){if(200===e.data.status.code){var t=new Date(1e3*e.data.data[0].announced_timestamp).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric"});console.log("result",e.data),console.log("time",t),s(Object(l.a)({},o,{certified:e.data.data[0].certified,dead:e.data.data[0].dead,deisolated:e.data.data[0].deisolated,updateTime:t}))}else console.log("There is an error")})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){var e=setInterval((function(){E().then((function(e){200===e.data.status.code?(console.log("result2",e.data.data[0]),s(Object(l.a)({},o,{certified:e.data.data[0].certified,dead:e.data.data[0].dead,deisolated:e.data.data[0].deisolated}))):console.log("There is an error")})).catch((function(e){return console.error(e)}))}),216e5);return function(){return clearInterval(e)}}),[]),Object(n.useEffect)((function(){0===d[0].num&&d.forEach((function(e,t){E(e.id).then((function(e){200===e.data.status.code?b(Object(f.a)((function(a){a[t].num=e.data.data[0].certified}))):console.log("There is an error")})).catch((function(e){return console.error(e)}))}))}),[]),Object(n.useEffect)((function(){var e=setInterval((function(){d.forEach((function(e,t){E(e.id).then((function(e){200===e.data.status.code?b(Object(f.a)((function(a){a[t].num=e.data.data[0].certified}))):console.log("There is an error")})).catch((function(e){return console.error(e)}))}))}),216e5);return function(){return clearInterval(e)}}),[]),c.a.createElement(g.Provider,{value:o},c.a.createElement(p.Provider,{value:d},t))}var h=function(){var e=function(){if(!Object(n.useContext)(p))throw new Error("Cannot find LocalDataStateContext");return Object(n.useContext)(p)}();return c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement("div",{className:"city-common ".concat(e.id),key:e.id},c.a.createElement("div",{className:"cityname"},e.idKR),c.a.createElement("div",{className:"num"},e.num))})))};var k=function(){var e=function(){if(!Object(n.useContext)(g))throw new Error("Cannot find DataStateContext");return Object(n.useContext)(g)}(),t=Object(n.useState)(0),a=Object(i.a)(t,2),r=a[0],o=a[1],l=Object(n.useState)(0),s=Object(i.a)(l,2),m=s[0],u=s[1],d=Object(n.useState)(0),f=Object(i.a)(d,2),v=f[0],E=f[1];return Object(n.useEffect)((function(){var t,a;return r<e.certified&&(a=setTimeout((function(){(t=e.certified-r)>0&&o((function(e){return e+Math.ceil(t/5)}))}),10)),function(){return clearTimeout(a)}}),[r,e]),Object(n.useEffect)((function(){var t=setInterval((function(){m<e.dead&&u((function(e){return e+1}))}),1);return function(){return clearInterval(t)}}),[m,e]),Object(n.useEffect)((function(){var t,a;return v<e.deisolated&&(a=setTimeout((function(){(t=e.deisolated-v)>0&&E((function(e){return e+Math.ceil(t/5)}))}),10)),function(){return clearTimeout(a)}}),[v,e]),c.a.createElement("div",null,c.a.createElement("section",null,c.a.createElement("div",{className:"home-img-section"},c.a.createElement("h1",null,"#\ucf54\ub85c\ub098 \ub9c8\uc2a4\ud06c \ub9c8\ucf13"))),c.a.createElement("section",{className:"infection-wrap"},c.a.createElement("div",null,c.a.createElement("div",{className:"updatetime"},e.updateTime," \uae30\uc900"),c.a.createElement("div",{className:"infection-data"},c.a.createElement("div",{className:"infection-true"},"\ud655\uc9c4",c.a.createElement("div",{className:"infection-true-num"},r)),c.a.createElement("div",{className:"infection-dead"},"\uc0ac\ub9dd",c.a.createElement("div",{className:"infection-dead-num"},m)),c.a.createElement("div",{className:"infection-false"},"\uaca9\ub9ac\ud574\uc81c",c.a.createElement("div",{className:"infection-false-num"},v)))),c.a.createElement("div",{className:"map"},c.a.createElement(h,null))))},j=a(36);var O=function(){var e=14900,t="\ub9c8\ub9c8\uc2a4\ud06c \ubbf8\ub9c8 \ubbf8\uc138\uba3c\uc9c0 \ud669\uc0ac \ubcf4\uac74\uc6a9\ub9c8\uc2a4\ud06c 10\uac1c\uc785(KF94)",a=9,r="2020-03-07:13:58:00+0900",o=Object(n.useState)(new Date),l=Object(i.a)(o,2),s=l[0],m=l[1],u=Object(n.useState)(""),d=Object(i.a)(u,2),f=d[0],v=d[1];return Object(n.useEffect)((function(){var e=setInterval((function(){"00h 00m 00s"===f||"-"===f[1]?clearInterval(e):(!function(){var e=new Date(r);m(new Date);var t=e-s,a=Math.floor(t%864e5/36e5),n=Math.floor(t%36e5/6e4),c=Math.floor(t%6e4/1e3);v("".concat(a<10?"0".concat(a):a,"h ").concat(n<10?"0".concat(n):n,"m ").concat(c<10?"0".concat(c):c,"s"))}(),console.log(f[1]))}),1e3);return function(){return clearInterval(e)}}),[s,f]),c.a.createElement("div",null,c.a.createElement("section",null,c.a.createElement("div",{className:"timesale-section"},c.a.createElement("h1",null,"#\ud0c0\uc784\uc138\uc77c"),c.a.createElement("h3",{className:"timesale-section-text"},"\ud2b9\uc815 \uc2dc\uac04\uc5d0 \ub9de\ucdb0 \ub9c8\uc2a4\ud06c\ub97c \uad6c\ub9e4\ud574\ubcf4\uc138\uc694!"))),c.a.createElement("section",{className:"mask-section"},c.a.createElement("div",{className:"mask-wrap"},c.a.createElement("div",{className:"mask-img",title:"mask"}),c.a.createElement("div",{className:"item-details"},c.a.createElement("h3",{className:"item-price"},e,"\uc6d0"),c.a.createElement("h3",{className:"item-name"},t),c.a.createElement("h4",{className:"item-time"},"\ud310\ub9e4 \uc608\uc815 \uc2dc\uac04 : ",a<12?"\uc624\uc804 ".concat(a,"\uc2dc"):"\uc624\ud6c4 ".concat(a,"\uc2dc")))),"00h 00m 00s"!==f?c.a.createElement("h2",{className:"item-timer"},c.a.createElement(j.a,null)," ",f):c.a.createElement("h2",{className:"item-selling"},"\ud310\ub9e4\uc2dc\uc791")))},N=a(32),w=a.n(N),R=a(12),y=a.n(R),K=a(17);var x=function(){var e=Object(n.useState)(window.kakao),t=Object(i.a)(e,1)[0],a=Object(n.useState)({lat:null,lng:null}),r=Object(i.a)(a,2),o=r[0],s=r[1],u=o.lat,d=o.lng,f=Object(n.useState)(null),v=Object(i.a)(f,2),E=v[0],g=v[1];Object(n.useEffect)((function(){if(!u&&!d){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;s(Object(l.a)({},o,{lat:a,lng:n}))}),(function(){console.log("\ub0b4 \uc704\uce58\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})):console.log("\uc704\uce58\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}if(!E&&u&&d){var e=document.getElementById("kakao-map"),a={center:new t.maps.LatLng(u,d),level:3},n=new t.maps.Map(e,a),c=new t.maps.LatLng(u,d);n.panTo(c);var r=new t.maps.ZoomControl;n.addControl(r,t.maps.ControlPosition.RIGHT),g(n)}}),[u,d,E]);var p=Object(n.useRef)(!1);return Object(n.useEffect)((function(){p.current?(t.maps.event.addListener(E,"dragend",(function(){var e=E.getLevel();console.log(e),E.setLevel(e);var t=E.getCenter();s(Object(l.a)({},o,{lat:t.getLat(),lng:t.getLng()}))})),g(E)):p.current=!0}),[E]),Object(n.useEffect)((function(){if(u&&d){var e=function(){var e=Object(K.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat=".concat(u,"&lng=").concat(d,"&m=1000"));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();(function(){var a=Object(K.a)(y.a.mark((function a(){var n;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!u||!d){a.next=6;break}return a.next=3,e();case 3:n=a.sent,console.log(n.data),n.data.count&&n.data.stores.forEach((function(e,a){var c=n.data.stores[a],r=c.created_at,o=c.name,i=c.remain_stat,l=c.stock_at,s=c.lat,m=c.lng,u=document.createElement("div");u.classList.add("store-label");var d="",f="";switch(i){case"plenty":d="green",f="100\uac1c \uc774\uc0c1";break;case"some":d="#ffd800",f="30\uac1c~100\uac1c";break;case"few":d="#e00000",f="2\uac1c~30\uac1c";break;case"empty":d="#6d6d6d",f="\ud488\uc808";break;case"break":d="#6d6d6d",f="\ud310\ub9e4\uc911\uc9c0";break;default:d="black",f="\uc815\ubcf4\uc5c6\uc74c"}u.style.backgroundColor=d,u.innerHTML='\n                                <div class="store-details">\n                                    <div style="padding-bottom:3px"> '.concat(o,'</div>\n                                    <div class="text-long"> \uc5c5\ub370\uc774\ud2b8: ').concat(r,'</div>\n                                    <div class="text-long"> \uc785\uace0\uc2dc\uac04: ').concat(l,"</div>\n                                </div>\n                                <div>\n                                ").concat(f,"\n                                </div>\n                                ");var v=new t.maps.LatLng(s,m);new t.maps.CustomOverlay({position:v,content:u}).setMap(E)}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}}),[E,u,d]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"officialsale-section"},c.a.createElement("h1",null,"#\uacf5\uc801 \ub9c8\uc2a4\ud06c \ud310\ub9e4"),c.a.createElement("h3",{className:"officialsale-section-text"},"\ub0b4 \uc8fc\ubcc0 \uacf5\uc801 \ub9c8\uc2a4\ud06c \ud310\ub9e4\ucc98\uc5d0\uc11c \ub9c8\uc2a4\ud06c\ub97c \uad6c\ub9e4\ud574\ubcf4\uc138\uc694!")),c.a.createElement("div",{className:"kakao-map-wrap"},c.a.createElement("div",{id:"kakao-map"})))},C=a(33),S=a.n(C),T=a(8),L=a(7);var I=function(){return c.a.createElement(T.a,null,c.a.createElement(b,null,c.a.createElement("div",{id:"fixed-bar"},c.a.createElement("div",{id:"fixed-bar-wrap"},c.a.createElement("div",{id:"logo-wrap"},c.a.createElement(T.b,{to:"/corona-mask-market/",id:"home-link"},c.a.createElement("img",{className:"logo-img",alt:"\ucf54\ub85c\ub098\ub9c8\uc2a4\ud06c\ub9c8\ucf13",src:"https://image.flaticon.com/icons/png/128/1033/1033165.png"}),c.a.createElement("div",{className:"logo-text"},"Corona Mask Market"))),c.a.createElement("div",{id:"category-wrap"},c.a.createElement("div",{className:"category"},c.a.createElement(T.b,{to:"/corona-mask-market/TimeSale",className:"glow"}," Time ")),c.a.createElement("div",{className:"category"},c.a.createElement(T.b,{to:"/corona-mask-market/RandomSale",className:"glow"}," Random ")),c.a.createElement("div",{className:"category"},c.a.createElement(T.b,{to:"/corona-mask-market/OfficialSale",className:"glow"}," Official ")),c.a.createElement("div",{className:"category"},c.a.createElement(T.b,{to:"/corona-mask-market/CheerKR",className:"glow"}," Support "))))),c.a.createElement(L.a,{path:"/corona-mask-market/",exact:!0,component:k}),c.a.createElement(L.a,{path:"/corona-mask-market/TimeSale",component:O}),c.a.createElement(L.a,{path:"/corona-mask-market/RandomSale",component:w.a}),c.a.createElement(L.a,{path:"/corona-mask-market/OfficialSale",component:x}),c.a.createElement(L.a,{path:"/corona-mask-market/CheerKR",component:S.a}),c.a.createElement("footer",{className:"footer"},"subin")))};o.a.render(c.a.createElement(I,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.02dc5de7.chunk.js.map